/* ============================================
   COMPANYWISE — stability.css
   Stability panel: Composed illustration layout
   Mobile-first · CSS design tokens
   ============================================ */


/* ============================================
   Grid Container Override
   ============================================ */

.wwc-signals-grid--stability {
  gap: 0;
  padding: var(--space-3);
}

@media (min-width: 768px) {
  .wwc-signals-grid--stability {
    padding: var(--space-4);
  }
}


/* ============================================
   Showcase Container
   Mobile: vertical card stack
   Tablet+: composed illustration with floats
   ============================================ */

.stab-showcase {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  position: relative;
}

.stab-showcase__depth,
.stab-showcase__blur {
  display: none;
}

@media (min-width: 768px) {
  .stab-showcase {
    position: relative;
    display: block;
    padding: var(--space-8) var(--space-6);
    padding-bottom: var(--space-14);
  }
}

@media (min-width: 1024px) {
  .stab-showcase {
    padding: var(--space-6) var(--space-4);
    padding-bottom: var(--space-12);
  }
}


/* ============================================
   Shared Card Base
   ============================================ */

.stab-card {
  background: var(--surface);
  border-radius: var(--rounded-xl);
  border: var(--border-1) solid var(--border);
  overflow: hidden;
  transition:
    box-shadow var(--duration-300) var(--ease-out),
    transform var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out);
}

.stab-card:hover {
  border-color: color-mix(in srgb, var(--text) 10%, transparent);
}


/* ============================================
   Card Header
   ============================================ */

.stab-card__header {
  display: flex;
  align-items: flex-start;
  gap: var(--space-2-5);
  padding: var(--space-3) var(--space-3-5);
  border-bottom: var(--border-1) solid var(--border);
}

/* ---- Icon ---- */

.stab-card__icon {
  width: var(--space-8);
  height: var(--space-8);
  border-radius: var(--rounded-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.stab-card__icon i {
  font-size: var(--text-sm);
}

.stab-card__icon--amber {
  background: var(--warning-bg);
  color: var(--warning);
}

.stab-card__icon--red {
  background: var(--danger-bg);
  color: var(--danger);
}

.stab-card__icon--blue {
  background: var(--brand-bg);
  color: var(--brand);
}

.stab-card__icon--muted {
  background: var(--muted);
  color: var(--text-faint);
}

/* ---- Titles ---- */

.stab-card__titles {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-0-5);
  padding-top: var(--space-0-5);
}

.stab-card__name {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text);
  margin: 0;
  line-height: var(--leading-snug);
}

.stab-card__sub {
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin: 0;
  line-height: var(--leading-relaxed);
}

/* ---- Badge ---- */

.stab-card__badge {
  font-size: 0.625rem;
  font-weight: var(--font-semibold);
  padding: var(--space-0-5) var(--space-2);
  border-radius: var(--rounded-full);
  flex-shrink: 0;
  margin-top: var(--space-0-5);
}

.stab-card__badge--high {
  background: var(--danger-bg);
  color: var(--danger);
}

.stab-card__badge--medium {
  background: var(--warning-bg);
  color: var(--warning);
}

.stab-card__badge--low {
  background: var(--success-bg);
  color: var(--success);
}



/* ============================================
   Anchor Card — Company Age
   ============================================ */

.stab-anchor__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  padding: var(--space-4);
  background: linear-gradient(
    to bottom,
    color-mix(in srgb, var(--page) 80%, transparent),
    var(--surface)
  );
}

/* ---- Age Display + Bracket ---- */

.stab-anchor__age {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
}

.stab-anchor__age-display {
  display: flex;
  align-items: baseline;
  gap: var(--space-1-5);
}

.stab-anchor__age-value {
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  color: var(--text);
  line-height: var(--leading-none);
}

.stab-anchor__age-unit {
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-secondary);
}

.stab-anchor__age-months {
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin-left: var(--space-1);
}

.stab-anchor__bracket {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1-5);
  padding: var(--space-1) var(--space-2-5);
  border-radius: var(--rounded-full);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  flex-shrink: 0;
}

.stab-anchor__bracket i {
  font-size: var(--text-sm);
}

.stab-anchor__bracket--danger {
  background: var(--danger-bg);
  color: var(--danger);
}

.stab-anchor__bracket--warning {
  background: var(--warning-bg);
  color: var(--warning);
}

.stab-anchor__bracket--ok {
  background: var(--success-bg);
  color: var(--success);
}

.stab-anchor__bracket--strong {
  background: var(--brand-bg);
  color: var(--brand);
}

@media (min-width: 768px) {
  .stab-anchor__age-value {
    font-size: var(--text-4xl);
  }
}

/* ---- Timeline Bar ---- */

.stab-anchor__timeline {
  display: flex;
  flex-direction: column;
  gap: var(--space-1-5);
}

.stab-anchor__timeline-bar {
  position: relative;
  height: var(--space-1-5);
  background: var(--muted);
  border-radius: var(--rounded-full);
  overflow: visible;
}

.stab-anchor__timeline-fill {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  border-radius: var(--rounded-full);
  transition: width var(--duration-700) var(--ease-out-expo);
}

.stab-anchor__timeline-fill--danger  { background: var(--danger); }
.stab-anchor__timeline-fill--warning { background: var(--warning); }
.stab-anchor__timeline-fill--ok      { background: var(--success); }
.stab-anchor__timeline-fill--strong  { background: var(--brand); }

.stab-anchor__timeline-marker {
  position: absolute;
  top: 50%;
  width: var(--space-2-5);
  height: var(--space-2-5);
  background: var(--surface);
  border: var(--border-2) solid var(--text);
  border-radius: var(--rounded-full);
  transform: translate(-50%, -50%);
  z-index: var(--z-10);
}

.stab-anchor__timeline-milestones {
  position: relative;
  height: var(--space-4);
}

.stab-anchor__milestone {
  position: absolute;
  transform: translateX(-50%);
  font-size: var(--text-xs);
  color: var(--text-faint);
  white-space: nowrap;
}

/* ---- Meta Footer ---- */

.stab-anchor__meta {
  display: flex;
  flex-direction: column;
  gap: var(--space-1-5);
}

.stab-anchor__meta-item {
  display: flex;
  align-items: center;
  gap: var(--space-1-5);
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.stab-anchor__meta-item i {
  font-size: var(--text-sm);
  color: var(--text-faint);
  flex-shrink: 0;
}

@media (min-width: 768px) {
  .stab-anchor__meta {
    flex-direction: row;
    gap: var(--space-4);
  }
}


/* ============================================
   Float Card — Company Status
   ============================================ */

.stab-status__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-2-5);
  padding: var(--space-3) var(--space-3-5);
}

/* ---- Beacon ---- */

.stab-status__beacon {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2-5);
  background: var(--page);
  border-radius: var(--rounded-xl);
}

.stab-status__light {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--space-9);
  height: var(--space-9);
  border-radius: var(--rounded-full);
  flex-shrink: 0;
}

.stab-status__light i {
  font-size: var(--text-lg);
}

.stab-status__light--ok {
  background: var(--success-bg);
  color: var(--success);
}

.stab-status__light--warning {
  background: var(--warning-bg);
  color: var(--warning);
}

.stab-status__light--danger {
  background: var(--danger-bg);
  color: var(--danger);
}

.stab-status__light--critical {
  background: color-mix(in srgb, var(--red-500) 10%, transparent);
  color: var(--red-500);
}

.stab-status__info {
  display: flex;
  flex-direction: column;
  gap: var(--space-0-5);
}

.stab-status__label {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text);
}

.stab-status__since {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

/* ---- Traffic Light Dots ---- */

.stab-status__traffic {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2) 0;
}

.stab-status__dot {
  width: var(--space-3);
  height: var(--space-3);
  border-radius: var(--rounded-full);
  opacity: var(--opacity-20);
  transition: opacity var(--duration-300) var(--ease-out);
}

.stab-status__dot--ok      { background: var(--success); }
.stab-status__dot--warning  { background: var(--warning); }
.stab-status__dot--danger   { background: var(--danger); }

.stab-status__dot--active {
  opacity: var(--opacity-100);
  box-shadow: 0 0 var(--space-2) currentColor;
}


/* ============================================
   Float Card — Address Changes
   ============================================ */

.stab-address__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-3-5);
}

.stab-address__summary {
  display: flex;
  align-items: baseline;
  gap: var(--space-1-5);
}

.stab-address__count {
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--text);
  line-height: var(--leading-none);
}

.stab-address__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.stab-address__freq {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  padding: var(--space-0-5) var(--space-2);
  border-radius: var(--rounded-full);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
}

.stab-address__freq--ok {
  background: var(--success-bg);
  color: var(--success);
}

.stab-address__freq--warning {
  background: var(--warning-bg);
  color: var(--warning);
}

.stab-address__freq--danger {
  background: var(--danger-bg);
  color: var(--danger);
}

.stab-address__tenure {
  display: flex;
  align-items: center;
  gap: var(--space-1-5);
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.stab-address__tenure i {
  font-size: var(--text-sm);
  color: var(--text-faint);
  flex-shrink: 0;
}


/* ============================================
   Float Card — Previous Names
   ============================================ */

.stab-names__body {
  padding: var(--space-3) var(--space-3-5);
}

.stab-names__count {
  display: flex;
  align-items: baseline;
  gap: var(--space-1-5);
}

.stab-names__value {
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--text);
  line-height: var(--leading-none);
}

.stab-names__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.stab-names__clear {
  display: flex;
  align-items: center;
  gap: var(--space-1-5);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  color: var(--success);
}

.stab-names__clear i {
  font-size: var(--text-sm);
  flex-shrink: 0;
}


/* ============================================
   No-Data Card
   ============================================ */

.stab-card--no-data {
  opacity: 0.7;
}

.stab-card__empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-5) var(--space-4);
  font-size: var(--text-xs);
  color: var(--text-faint);
}

.stab-card__empty i {
  font-size: var(--text-base);
}


/* ============================================
   TABLET+ — Composed Illustration Layout
   Float cards positioned absolutely around
   the centred anchor card
   ============================================ */

@media (min-width: 768px) {

  /* --- Depth card (tinted rotated background) --- */

  .stab-showcase__depth {
    display: block;
    position: absolute;
    top: var(--space-6);
    left: var(--space-4);
    right: var(--space-4);
    bottom: var(--space-8);
    background: linear-gradient(
      135deg,
      var(--warning-bg),
      color-mix(in srgb, var(--warning) 4%, var(--page))
    );
    border-radius: var(--rounded-2xl);
    border: var(--border-1) solid color-mix(in srgb, var(--warning) 8%, transparent);
    transform: rotate(1.5deg);
    z-index: 1;
    pointer-events: none;
  }

  /* --- Blur accent (bottom glow) --- */

  .stab-showcase__blur {
    display: block;
    position: absolute;
    bottom: var(--space-2);
    left: 50%;
    transform: translateX(-50%);
    width: 65%;
    height: var(--space-6);
    background: linear-gradient(
      135deg,
      var(--warning-bg),
      color-mix(in srgb, var(--warning) 8%, transparent)
    );
    border-radius: var(--rounded-full);
    filter: blur(var(--blur-2xl));
    opacity: var(--opacity-30);
    z-index: 0;
    pointer-events: none;
  }

  /* --- Anchor card — centred, prominent --- */

  .stab-card--anchor {
    position: relative;
    z-index: 10;
    max-width: 68%;
    margin: 0 auto;
    box-shadow: var(--shadow-lg);
    border-color: color-mix(in srgb, var(--text) 8%, transparent);
  }

  .stab-card--anchor:hover {
    box-shadow: var(--shadow-xl);
  }

  /* --- Status float — top right --- */

  .stab-card--float-status {
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    z-index: 20;
    width: 200px;
    transform: rotate(2.5deg);
    box-shadow: var(--shadow-lg);
  }

  .stab-card--float-status:hover {
    transform: rotate(2.5deg) translateY(calc(-1 * var(--space-1)));
    box-shadow: var(--shadow-xl);
  }

  /* --- Address float — bottom left --- */

  .stab-card--float-address {
    position: absolute;
    bottom: var(--space-4);
    left: var(--space-1);
    z-index: 20;
    width: 180px;
    transform: rotate(-2deg);
    box-shadow: var(--shadow-lg);
  }

  .stab-card--float-address:hover {
    transform: rotate(-2deg) translateY(calc(-1 * var(--space-1)));
    box-shadow: var(--shadow-xl);
  }

  /* --- Names float — bottom right --- */

  .stab-card--float-names {
    position: absolute;
    bottom: var(--space-6);
    right: var(--space-2);
    z-index: 20;
    width: 160px;
    transform: rotate(1.5deg);
    box-shadow: var(--shadow-lg);
  }

  .stab-card--float-names:hover {
    transform: rotate(1.5deg) translateY(calc(-1 * var(--space-1)));
    box-shadow: var(--shadow-xl);
  }
}


/* ============================================
   DESKTOP — Narrower Content Zone Adjustments
   Hero zone takes 320px on the left
   ============================================ */

@media (min-width: 1024px) {

  .stab-card--anchor {
    max-width: 65%;
  }

  .stab-card--float-status {
    width: 195px;
  }

  .stab-card--float-address {
    width: 175px;
  }

  .stab-card--float-names {
    width: 155px;
  }
}

@media (min-width: 1280px) {

  .stab-card--anchor {
    max-width: 60%;
  }

  .stab-card--float-status {
    width: 210px;
    right: var(--space-2);
  }

  .stab-card--float-address {
    width: 185px;
    left: var(--space-2);
  }

  .stab-card--float-names {
    width: 165px;
    right: var(--space-3);
  }
}
