/* ============================================
   COMPANYWISE — financial.css
   Financial panel: Composed illustration layout
   Mobile-first · CSS design tokens
   ============================================ */


/* ============================================
   Grid Container Override
   ============================================ */

.wwc-signals-grid--financial {
  gap: 0;
  padding: var(--space-3);
}

@media (min-width: 768px) {
  .wwc-signals-grid--financial {
    padding: var(--space-4);
  }
}


/* ============================================
   Showcase Container
   Mobile: vertical card stack
   Tablet+: composed illustration with floats
   ============================================ */

.fin-showcase {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  position: relative;
}

.fin-showcase__depth,
.fin-showcase__blur {
  display: none;
}

@media (min-width: 768px) {
  .fin-showcase {
    position: relative;
    display: block;
    padding: var(--space-6) var(--space-6);
    padding-bottom: var(--space-10);
  }
}

@media (min-width: 1024px) {
  .fin-showcase {
    padding: var(--space-5) var(--space-4);
    padding-bottom: var(--space-8);
  }
}


/* ============================================
   Shared Card Base
   ============================================ */

.fin-card {
  background: var(--surface);
  border-radius: var(--rounded-xl);
  border: var(--border-1) solid var(--border);
  overflow: hidden;
  transition:
    box-shadow var(--duration-300) var(--ease-out),
    transform var(--duration-300) var(--ease-out),
    border-color var(--duration-300) var(--ease-out);
}

.fin-card:hover {
  border-color: color-mix(in srgb, var(--text) 10%, transparent);
}


/* ============================================
   Card Header
   ============================================ */

.fin-card__header {
  display: flex;
  align-items: flex-start;
  gap: var(--space-2-5);
  padding: var(--space-3) var(--space-3-5);
  border-bottom: var(--border-1) solid var(--border);
}

/* ---- Icon ---- */

.fin-card__icon {
  width: var(--space-8);
  height: var(--space-8);
  border-radius: var(--rounded-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.fin-card__icon i {
  font-size: var(--text-sm);
}

.fin-card__icon--red {
  background: var(--danger-bg);
  color: var(--danger);
}

.fin-card__icon--emerald {
  background: var(--success-bg);
  color: var(--success);
}

.fin-card__icon--muted {
  background: var(--muted);
  color: var(--text-faint);
}

/* ---- Titles ---- */

.fin-card__titles {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-0-5);
  padding-top: var(--space-0-5);
}

.fin-card__name {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text);
  margin: 0;
  line-height: var(--leading-snug);
}

.fin-card__sub {
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin: 0;
  line-height: var(--leading-relaxed);
}

/* ---- Badge ---- */

.fin-card__badge {
  font-size: 0.625rem;
  font-weight: var(--font-semibold);
  padding: var(--space-0-5) var(--space-2);
  border-radius: var(--rounded-full);
  flex-shrink: 0;
  margin-top: var(--space-0-5);
}

.fin-card__badge--high {
  background: var(--danger-bg);
  color: var(--danger);
}

.fin-card__badge--medium {
  background: var(--warning-bg);
  color: var(--warning);
}

.fin-card__badge--low {
  background: var(--success-bg);
  color: var(--success);
}



/* ============================================
   Anchor Card — Overdue Accounts
   ============================================ */

.fin-anchor__body {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4);
  background: linear-gradient(
    to bottom,
    color-mix(in srgb, var(--page) 80%, transparent),
    var(--surface)
  );
}

@media (min-width: 768px) {
  .fin-anchor__body {
    flex-direction: row;
    align-items: center;
    gap: var(--space-5);
    padding: var(--space-4) var(--space-5);
  }
}

/* ---- SVG Gauge ---- */

.fin-anchor__gauge {
  position: relative;
  width: var(--space-24);
  height: var(--space-24);
  flex-shrink: 0;
}

.fin-gauge__svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.fin-gauge__track {
  fill: none;
  stroke: var(--muted);
  stroke-width: 6;
}

.fin-gauge__fill {
  fill: none;
  stroke-width: 6;
  stroke-linecap: round;
  transition: stroke-dashoffset var(--duration-700) var(--ease-out-expo);
}

.fin-gauge__fill--ok      { stroke: var(--success); }
.fin-gauge__fill--warning  { stroke: var(--warning); }
.fin-gauge__fill--danger   { stroke: var(--danger); }
.fin-gauge__fill--critical { stroke: var(--red-500); }

.fin-gauge__center {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-0-5);
}

.fin-gauge__value {
  font-size: var(--text-2xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-none);
  color: var(--text);
}

.fin-gauge__value--warning  { color: var(--warning); }
.fin-gauge__value--danger   { color: var(--danger); }
.fin-gauge__value--critical { color: var(--red-500); }

.fin-gauge__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-weight: var(--font-medium);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
}

@media (min-width: 768px) {
  .fin-anchor__gauge {
    width: var(--space-28);
    height: var(--space-28);
  }

  .fin-gauge__value {
    font-size: var(--text-3xl);
  }
}

/* ---- Detail Column ---- */

.fin-anchor__detail {
  display: flex;
  flex-direction: column;
  gap: var(--space-2-5);
  flex: 1;
  min-width: 0;
  width: 100%;
}

.fin-anchor__status,
.fin-anchor__due {
  display: flex;
  align-items: center;
  gap: var(--space-1-5);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  color: var(--text-muted);
}

.fin-anchor__status i,
.fin-anchor__due i {
  font-size: var(--text-sm);
  flex-shrink: 0;
}

.fin-anchor__status--overdue {
  color: var(--danger);
}

.fin-anchor__status--overdue i {
  color: var(--danger);
}

.fin-anchor__status--on-time {
  color: var(--success);
}

.fin-anchor__due i {
  color: var(--text-faint);
}

/* ---- Scale Bar ---- */

.fin-anchor__scale {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.fin-anchor__scale-bar {
  position: relative;
  display: flex;
  height: var(--space-1-5);
  border-radius: var(--rounded-full);
  overflow: hidden;
}

.fin-anchor__zone {
  height: 100%;
}

.fin-anchor__zone--ok       { background: var(--success); }
.fin-anchor__zone--warning  { background: var(--warning); }
.fin-anchor__zone--danger   { background: var(--danger); }
.fin-anchor__zone--critical { background: var(--red-500); }

.fin-anchor__marker {
  position: absolute;
  top: calc(-1 * var(--space-0-5));
  width: var(--space-0-5);
  height: var(--space-2-5);
  background: var(--text);
  border-radius: var(--rounded-full);
  transform: translateX(-50%);
}

.fin-anchor__scale-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.625rem;
  color: var(--text-faint);
}


/* ============================================
   Float Card — CCJs & Charges
   ============================================ */

.fin-ccj__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-2-5);
  padding: var(--space-3) var(--space-3-5);
}

.fin-ccj__items {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-1-5);
}

.fin-ccj__item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-0-5);
  padding: var(--space-2) var(--space-1);
  border-radius: var(--rounded-lg);
  background: var(--page);
}

.fin-ccj__item--danger {
  background: var(--danger-bg);
}

.fin-ccj__item--warning {
  background: var(--warning-bg);
}

.fin-ccj__item--ok {
  background: var(--success-bg);
}

.fin-ccj__value {
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--text);
  line-height: var(--leading-none);
}

.fin-ccj__item--danger .fin-ccj__value {
  color: var(--danger);
}

.fin-ccj__label {
  font-size: 0.625rem;
  color: var(--text-muted);
  text-align: center;
  line-height: var(--leading-snug);
}

.fin-ccj__total {
  display: flex;
  align-items: center;
  gap: var(--space-1-5);
  padding: var(--space-2) var(--space-2-5);
  border-radius: var(--rounded-lg);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
}

.fin-ccj__total i {
  font-size: var(--text-sm);
  flex-shrink: 0;
}

.fin-ccj__total--alert {
  background: var(--danger-bg);
  color: var(--danger);
}

.fin-ccj__total--clear {
  background: var(--success-bg);
  color: var(--success);
}


/* ============================================
   Float Card — Financial Health
   ============================================ */

.fin-health__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-2-5);
  padding: var(--space-3) var(--space-3-5);
}

.fin-health__metrics {
  display: flex;
  align-items: stretch;
  gap: var(--space-3);
}

.fin-health__metric {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.fin-health__label {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-weight: var(--font-medium);
}

.fin-health__row {
  display: flex;
  align-items: baseline;
  gap: var(--space-1-5);
  flex-wrap: wrap;
}

.fin-health__value {
  font-size: var(--text-base);
  font-weight: var(--font-bold);
  color: var(--text);
  line-height: var(--leading-none);
}

.fin-health__trend {
  display: inline-flex;
  align-items: center;
  gap: var(--space-0-5);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
}

.fin-health__trend i {
  font-size: var(--text-xs);
}

.fin-health__trend--up   { color: var(--success); }
.fin-health__trend--down { color: var(--danger); }
.fin-health__trend--flat { color: var(--text-muted); }

.fin-health__divider {
  width: var(--border-1);
  background: var(--border);
  flex-shrink: 0;
}

.fin-health__footer {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding-top: var(--space-2);
  border-top: var(--border-1) solid var(--border);
  font-size: var(--text-xs);
  color: var(--text-faint);
}

.fin-health__footer span {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.fin-health__footer i {
  font-size: var(--text-sm);
}


/* ============================================
   No-Data Card
   ============================================ */

.fin-card--no-data {
  opacity: 0.7;
}

.fin-card__empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-5) var(--space-4);
  font-size: var(--text-xs);
  color: var(--text-faint);
}

.fin-card__empty i {
  font-size: var(--text-base);
}


/* ============================================
   TABLET+ — Composed Illustration Layout
   Float cards positioned absolutely around
   the centred anchor card
   ============================================ */

@media (min-width: 768px) {

  /* --- Depth card (tinted rotated background) --- */

  .fin-showcase__depth {
    display: block;
    position: absolute;
    top: var(--space-6);
    left: var(--space-4);
    right: var(--space-4);
    bottom: var(--space-8);
    background: linear-gradient(
      135deg,
      var(--danger-bg),
      color-mix(in srgb, var(--danger) 4%, var(--page))
    );
    border-radius: var(--rounded-2xl);
    border: var(--border-1) solid color-mix(in srgb, var(--danger) 8%, transparent);
    transform: rotate(1.5deg);
    z-index: 1;
    pointer-events: none;
  }

  /* --- Blur accent (bottom glow) --- */

  .fin-showcase__blur {
    display: block;
    position: absolute;
    bottom: var(--space-2);
    left: 50%;
    transform: translateX(-50%);
    width: 65%;
    height: var(--space-6);
    background: linear-gradient(
      135deg,
      var(--danger-bg),
      color-mix(in srgb, var(--danger) 8%, transparent)
    );
    border-radius: var(--rounded-full);
    filter: blur(var(--blur-2xl));
    opacity: var(--opacity-30);
    z-index: 0;
    pointer-events: none;
  }

  /* --- Anchor card — centred, prominent --- */

  .fin-card--anchor {
    position: relative;
    z-index: 10;
    max-width: 78%;
    margin: 0 auto;
    box-shadow: var(--shadow-lg);
    border-color: color-mix(in srgb, var(--text) 8%, transparent);
  }

  .fin-card--anchor:hover {
    box-shadow: var(--shadow-xl);
  }

  /* --- CCJ float — top right --- */

  .fin-card--float-ccj {
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    z-index: 20;
    width: 210px;
    transform: rotate(2.5deg);
    box-shadow: var(--shadow-lg);
  }

  .fin-card--float-ccj:hover {
    transform: rotate(2.5deg) translateY(calc(-1 * var(--space-1)));
    box-shadow: var(--shadow-xl);
  }

  /* --- Health float — bottom left --- */

  .fin-card--float-health {
    position: absolute;
    bottom: var(--space-4);
    left: var(--space-1);
    z-index: 20;
    width: 235px;
    transform: rotate(-2deg);
    box-shadow: var(--shadow-lg);
  }

  .fin-card--float-health:hover {
    transform: rotate(-2deg) translateY(calc(-1 * var(--space-1)));
    box-shadow: var(--shadow-xl);
  }
}


/* ============================================
   DESKTOP — Narrower Content Zone Adjustments
   Hero zone takes 320px on the left
   ============================================ */

@media (min-width: 1024px) {

  .fin-card--anchor {
    max-width: 75%;
  }

  .fin-card--float-ccj {
    width: 200px;
  }

  .fin-card--float-health {
    width: 220px;
  }
}

@media (min-width: 1280px) {

  .fin-card--anchor {
    max-width: 70%;
  }

  .fin-card--float-ccj {
    width: 215px;
    right: var(--space-2);
  }

  .fin-card--float-health {
    width: 240px;
    left: var(--space-2);
  }
}
